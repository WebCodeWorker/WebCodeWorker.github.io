(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4784ae34"],{"053b":function(t,s,a){var e=a("1e2c"),i=a("d910").f,r=Function.prototype,n=r.toString,o=/^\s*function ([^ (]*)/,c="name";e&&!(c in r)&&i(r,c,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(t){return""}}})},1462:function(t,s,a){"use strict";function e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}a.d(s,"a",(function(){return e}))},"2eeb":function(t,s,a){"use strict";var e=a("1c8b"),i=a("5dfd").map,r=a("1ea7"),n=a("ff9c"),o=r("map"),c=n("map");e({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"2f14":function(t,s,a){"use strict";a.d(s,"a",(function(){return n}));a("b4fb"),a("77ad");var e=a("1462"),i=a("a340"),r=function(){function t(){Object(e["a"])(this,t)}return Object(i["a"])(t,[{key:"queryString",value:function(t){var s="";for(var a in t)s+="".concat(a,"=").concat(t[a],"&");return s.slice(0,-1)}}]),t}(),n=new r},3174:function(t,s,a){},"76a1":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"pay"},[a("van-nav-bar",{attrs:{title:"确认订单","left-arrow":"",fixed:!0,placeholder:""},on:{"click-left":t.back}}),a("div",{staticClass:"address-box"},[a("div",{staticClass:"address"},[a("div",{staticClass:"clearfix",on:{click:t.openAddressBox}},[a("div",{staticClass:"fl address-title"},[t._v("选择收货地址")]),a("div",{staticClass:"fl arrow-box"},[a("van-icon",{staticClass:"arrow-icon",attrs:{name:"arrow"}})],1)]),a("div",{staticClass:"address-content"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"fl name"},[t._v(t._s(t.currentAddress.name))]),a("div",{staticClass:"fl phone"},[t._v(t._s(t.currentAddress.tel))])]),a("div",{staticClass:"address-info"},[t._v(t._s(t.currentAddress.address))])])])]),a("div",{staticClass:"order-info"},[a("div",{staticClass:"order-box"},[a("div",{staticClass:"order-title"},[t._v("订单信息")]),a("div",t._l(t.shopbagData,(function(s,e){return a("div",{key:e,staticClass:"clearfix cell-box"},[a("div",{staticClass:"fl pro-img"},[a("img",{staticClass:"auto-img",attrs:{src:s.goods_pic,alt:""}})]),a("div",{staticClass:"fl pro-info"},[a("div",{staticClass:"text-box"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"text-name van-multi-ellipsis--l2"},[t._v(t._s(s.goods_name))]),a("div",{staticClass:"price"},[t._v("￥"+t._s(s.min_group_price))])]),a("van-icon",{staticClass:"fl",attrs:{name:"shop-o"}}),a("div",{staticClass:"fl text-enname"},[t._v(t._s(s.mall_name))])],1),a("div",{staticClass:"price-box"},[a("div",{staticClass:"fr count"},[t._v("x"+t._s(s.count))])])])])})),0)])]),a("div",{staticClass:"pay-btn"},[a("div",{staticClass:"sum"},[a("div",{staticClass:"fl pro-count"},[t._v("共计 "+t._s(t.product.count)+" 件,")]),a("div",{staticClass:"fl pro-total"},[t._v("合计 ￥"+t._s(t.product.total))])]),a("van-button",{staticClass:"fr",attrs:{round:"",block:"",color:"linear-gradient(to right, rgb(224 71 36 / 58%) , #e02e24)"},on:{click:t.pay}},[t._v("提交订单")])],1),a("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.isOpen,callback:function(s){t.isOpen=s},expression:"isOpen"}},[a("div",{staticClass:"address-title-box"},[t._v("选择收货地址")]),a("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{select:t.selectAddress,add:t.newAddress},model:{value:t.chosenAddressId,callback:function(s){t.chosenAddressId=s},expression:"chosenAddressId"}})],1)],1)},i=[],r=(a("2eeb"),a("053b"),a("3174"),a("2f14"),{data:function(){return{isOpen:!1,chosenAddressId:"",list:[],currentAddress:{name:"",tel:"",address:""},shopbagData:[],product:{count:0,total:0},goods_data:[]}},created:function(){this.goods_data=this.$route.query.goods_data,this.getReceiveAddress(),this.getShopbagDataBySids()},methods:{back:function(){this.$router.go(-1)},openAddressBox:function(){this.isOpen=!0},selectAddress:function(t,s){for(var a in this.isOpen=!1,this.currentAddress)this.currentAddress[a]=t[a]},newAddress:function(){this.$router.push({name:"NewAddress"})},getReceiveAddress:function(){var t=this,s=JSON.parse(localStorage.getItem("address"));if(!s)return this.$toast("目前还没有填写收货地址"),void(this.isOpen=!0);s.map((function(s){var a=s.province+s.city+s.county+s.addressDetail;t.list.push({id:s.aid,name:s.name,tel:s.tel,address:a,isDefault:Boolean(s.isDefault)}),Boolean(s.isDefault)&&(t.chosenAddressId=s.aid,t.currentAddress.name=s.name,t.currentAddress.tel=s.tel,t.currentAddress.address=a)}))},getShopbagDataBySids:function(){var t=this;if(this.goods_data){var s="";"string"===typeof this.goods_data?s=this.goods_data:this.goods_data.map((function(t){s+=t.goods_id+","})),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/2260-9",params:{showapi_appid:this.showapi_appid,showapi_sign:this.secret,goods_ids:s}}).then((function(s){t.$toast.clear();var a=JSON.parse(s.data.showapi_res_body.ret_body);a.map((function(t){t.min_group_price=t.min_group_price/100})),t.shopbagData=a;for(var e=0;e<t.shopbagData.length;e++)t.shopbagData[e].count=t.goods_data[e].count;t.shopbagData.map((function(s){t.product.count+=s.count,t.product.total+=s.count*s.min_group_price}))})).catch((function(s){t.$toast.clear()}))}},pay:function(){""!=this.chosenAddressId?this.$router.push({name:"Order",query:{goods_data:this.goods_data}}):this.$toast("请选择收货地址")}}}),n=r,o=a("9ca4"),c=Object(o["a"])(n,e,i,!1,null,null,null);s["default"]=c.exports},a340:function(t,s,a){"use strict";function e(t,s){for(var a=0;a<s.length;a++){var e=s[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}a.d(s,"a",(function(){return i}))},b4fb:function(t,s,a){"use strict";var e=a("1c8b"),i=a("efe2"),r=a("74e7"),n=a("a719"),o=a("3553"),c=a("d88d"),d=a("1bbd"),l=a("1ca1"),u=a("1ea7"),f=a("90fb"),p=a("f594"),v=f("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",b=p>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),_=u("concat"),m=function(t){if(!n(t))return!1;var s=t[v];return void 0!==s?!!s:r(t)},C=!b||!_;e({target:"Array",proto:!0,forced:C},{concat:function(t){var s,a,e,i,r,n=o(this),u=l(n,0),f=0;for(s=-1,e=arguments.length;s<e;s++)if(r=-1===s?n:arguments[s],m(r)){if(i=c(r.length),f+i>h)throw TypeError(g);for(a=0;a<i;a++,f++)a in r&&d(u,f,r[a])}else{if(f>=h)throw TypeError(g);d(u,f++,r)}return u.length=f,u}})}}]);
//# sourceMappingURL=chunk-4784ae34.9643b55f.js.map